webpackJsonp([0],[function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(2),angular.module("rooms",[__webpack_require__(3),__webpack_require__(5),__webpack_require__(7)["default"],__webpack_require__(27)["default"],__webpack_require__(39)["default"],__webpack_require__(42)["default"]]).config(function($locationProvider){return $locationProvider.html5Mode(!0)}).service("commonActions",__webpack_require__(49)["default"]),document.addEventListener("DOMContentLoaded",function(){return angular.bootstrap(document,["rooms"])})},function(module,exports){},,,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_config=__webpack_require__(8),_config2=_interopRequireDefault(_config),_login=__webpack_require__(9),_login2=_interopRequireDefault(_login),resolve=_config2["default"].routerResolve,template='\n    <div ng-if="!$ctrl.token" class="'+_login2["default"].wrapper+'">\n      <login-form \n        state="$ctrl.form" \n        on-change="$ctrl.changeForm($event)"\n        on-submit="$ctrl.submit()">\n      </login-form>\n    </div>\n',controller=function(){function controller(loginActions,commonActions){_classCallCheck(this,controller),this.actions=loginActions,this.commonActions=commonActions}return _createClass(controller,[{key:"changeForm",value:function(changes){this.actions.form=changes}},{key:"submit",value:function(){var _this=this;this.commonActions.authorization(this.actions.form).then(function(_ref){var _ref$error=_ref.error,error=void 0===_ref$error?null:_ref$error;return error&&_this.actions.error(error)})}},{key:"form",get:function(){return this.actions.form}},{key:"token",get:function(){return this.actions.token}}]),controller}();exports["default"]=angular.module("Login Module",[__webpack_require__(13)["default"]]).service("loginActions",__webpack_require__(16)["default"]).component("loginPage",{bindings:{state:"<"},template:template,controller:controller}).config(function($routeProvider){return $routeProvider.when("/",{template:'<login-page state="$resolve.state"></login-page>',resolve:resolve})}).name},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var apiURL="http://meeting.test-services.a00.me",routerResolve={state:function(commonActions){return commonActions.authentication()}};exports["default"]={apiURL:apiURL,routerResolve:routerResolve}},function(module,exports,__webpack_require__){var content=__webpack_require__(10);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,".login_wrapper_JSjoK{padding:2rem}@media only screen and (max-width:320px){.login_wrapper_JSjoK{padding:0 2rem}}",""]),exports.locals={wrapper:"login_wrapper_JSjoK"}},function(module,exports){module.exports=function(){var list=[];return list.toString=function(){for(var result=[],i=0;i<this.length;i++){var item=this[i];item[2]?result.push("@media "+item[2]+"{"+item[1]+"}"):result.push(item[1])}return result.join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=item[0],css=item[1],media=item[2],sourceMap=item[3],part={css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,styleElement){var head=getHeadElement(),lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?head.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling):head.appendChild(styleElement):head.insertBefore(styleElement,head.firstChild),styleElementsInsertedAtTop.push(styleElement);else{if("bottom"!==options.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");head.appendChild(styleElement)}}function removeStyleElement(styleElement){styleElement.parentNode.removeChild(styleElement);var idx=styleElementsInsertedAtTop.indexOf(styleElement);idx>=0&&styleElementsInsertedAtTop.splice(idx,1)}function createStyleElement(options){var styleElement=document.createElement("style");return styleElement.type="text/css",insertStyleElement(options,styleElement),styleElement}function createLinkElement(options){var linkElement=document.createElement("link");return linkElement.rel="stylesheet",insertStyleElement(options,linkElement),linkElement}function addStyle(obj,options){var styleElement,update,remove;if(options.singleton){var styleIndex=singletonCounter++;styleElement=singletonElement||(singletonElement=createStyleElement(options)),update=applyToSingletonTag.bind(null,styleElement,styleIndex,!1),remove=applyToSingletonTag.bind(null,styleElement,styleIndex,!0)}else obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(styleElement=createLinkElement(options),update=updateLink.bind(null,styleElement),remove=function(){removeStyleElement(styleElement),styleElement.href&&URL.revokeObjectURL(styleElement.href)}):(styleElement=createStyleElement(options),update=applyToTag.bind(null,styleElement),remove=function(){removeStyleElement(styleElement)});return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(styleElement,index,remove,obj){var css=remove?"":obj.css;if(styleElement.styleSheet)styleElement.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=styleElement.childNodes;childNodes[index]&&styleElement.removeChild(childNodes[index]),childNodes.length?styleElement.insertBefore(cssNode,childNodes[index]):styleElement.appendChild(cssNode)}}function applyToTag(styleElement,obj){var css=obj.css,media=obj.media;if(media&&styleElement.setAttribute("media",media),styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}function updateLink(linkElement,obj){var css=obj.css,sourceMap=obj.sourceMap;sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=linkElement.href;linkElement.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}var stylesInDom={},memoize=function(fn){var memo;return function(){return"undefined"==typeof memo&&(memo=fn.apply(this,arguments)),memo}},isOldIE=memoize(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),getHeadElement=memoize(function(){return document.head||document.getElementsByTagName("head")[0]}),singletonElement=null,singletonCounter=0,styleElementsInsertedAtTop=[];module.exports=function(list,options){options=options||{},"undefined"==typeof options.singleton&&(options.singleton=isOldIE()),"undefined"==typeof options.insertAt&&(options.insertAt="bottom");var styles=listToStyles(list);return addStylesToDom(styles,options),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}if(newList){var newStyles=listToStyles(newList);addStylesToDom(newStyles,options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_form=__webpack_require__(14),_form2=_interopRequireDefault(_form),bindings={state:"<",onChange:"&",onSubmit:"&"},template='\n    <form name="LoginForm" ng-submit="$ctrl.onSubmit()">\n       <h1 class="'+_form2["default"].header+'">Rooms</h1>\n       \n       <input type="text" class="'+_form2["default"].textField+'" \n              placeholder="Логин" ng-model="$ctrl.state.login"\n              ng-change="$ctrl.change()"\n       />\n       \n       <input type="password" class="'+_form2["default"].textField+'" \n              placeholder="Пароль" ng-model="$ctrl.state.password"\n              ng-change="$ctrl.change()"\n       />\n       \n       <button class="'+_form2["default"].button+'" \n               ng-disabled="!($ctrl.state.login && $ctrl.state.password)">\n               Войти\n       </button>\n    </form>\n',controller=function(){function controller(){_classCallCheck(this,controller)}return _createClass(controller,[{key:"$onChanges",value:function(changes){changes.state&&(this.state=Object.assign({},this.state))}},{key:"change",value:function(){var $event={login:this.state.login,password:this.state.password,temporary:!0};this.onChange({$event:$event})}}]),controller}();exports["default"]=angular.module("Login Form Module",[]).component("loginForm",{bindings:bindings,template:template,controller:controller}).name},function(module,exports,__webpack_require__){var content=__webpack_require__(15);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,".form_header_d2KZ0{color:#fff;text-align:center;font-size:2rem;padding:1rem}.form_textField_zs-2n{display:block;margin-bottom:1rem;width:100%;padding:1rem;font-size:1.3rem;border:4px solid #8e8e93;background:transparent;color:#fff}.form_textField_zs-2n:focus{border-color:#ec4d6e}.form_button_RjFaB{display:block;width:100%;border:none;padding:1rem;font-size:2rem;color:#fff;background:#ec4d6e;margin-top:2rem;text-align:center}.form_button_RjFaB:disabled{color:#000;background:#8e8e93}",""]),exports.locals={header:"form_header_d2KZ0",textField:"form_textField_zs-2n",button:"form_button_RjFaB"}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_state=__webpack_require__(17),_state2=_interopRequireDefault(_state),loginForm=_state2["default"].select("loginForm"),LoginActions=function(){function LoginActions($http,$location,$q){_classCallCheck(this,LoginActions),this.$http=$http,this.$location=$location,this.$q=$q,console.info("Login Actions Service constructed")}return _createClass(LoginActions,[{key:"error",value:function(message){message&&loginForm.set("error",message)}},{key:"token",get:function(){return _state2["default"].select("accessToken").get()}},{key:"form",get:function(){return loginForm.get()},set:function(data){loginForm.set(data)}}]),LoginActions}();exports["default"]=LoginActions},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _baobab=__webpack_require__(18),_baobab2=_interopRequireDefault(_baobab),_initial=__webpack_require__(26),_initial2=_interopRequireDefault(_initial),logger=function(previousState,newState,affectedPaths){console.groupCollapsed("State change:"),console.log("Affected paths",affectedPaths.map(function(path){return path.join("/").toString()})),console.log("New state",newState),console.log("Previous state",previousState),console.groupEnd()},config={maxHistory:10,validate:logger},tree=new _baobab2["default"](_initial2["default"],config);exports["default"]=tree},,,,,,,,,function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_actions=__webpack_require__(28),_actions2=_interopRequireDefault(_actions),_item=__webpack_require__(30),_item2=_interopRequireDefault(_item),_config=__webpack_require__(8),_config2=_interopRequireDefault(_config),resolve=_config2["default"].routerResolve,template='\n    <div>\n        <back-button href="#" title="Переговорки"></back-button>\n        <ul>\n            <li ng-repeat="room in $ctrl.rooms track by $index" class="'+_item2["default"].item+' {{ $ctrl.aclass }}">\n              <a ng-href="/room/{{ room.id }}"ng-bind="room.title"\n                 ng-click="$ctrl.onClick(room);"\n                 ng-class="$ctrl.isFree(room)">\n              </a>\n            </li>\n        </ul>\n    </div>\n',controller=function(){function controller($timeout,roomsActions){_classCallCheck(this,controller),this.$timeout=$timeout,this.actions=roomsActions,roomsActions.fetch()}return _createClass(controller,[{key:"$postLink",value:function(){var _this=this;this.$timeout(function(){_this.aclass=_item2["default"].animate},150)}},{key:"isFree",value:function(room){return room.free?_item2["default"].free:""}},{key:"onClick",value:function(room){this.actions.select(room)}},{key:"rooms",get:function(){return this.actions.rooms}}]),controller}();exports["default"]=angular.module("Rooms Module",[__webpack_require__(32)["default"],__webpack_require__(35)["default"]]).service("roomsActions",_actions2["default"]).component("roomsPage",{bindings:{state:"<"},template:template,controller:controller}).config(function($routeProvider){return $routeProvider.when("/rooms",{template:'<rooms-page state="$resolve.state" rooms="$resolve.rooms"></rooms-page>',resolve:resolve})}).name},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_state=__webpack_require__(17),_state2=_interopRequireDefault(_state),_config=__webpack_require__(8),_config2=_interopRequireDefault(_config),_rooms=__webpack_require__(29),_rooms2=_interopRequireDefault(_rooms),RoomsActions=function(){function RoomsActions($http,$location,$q,$timeout){_classCallCheck(this,RoomsActions),this.$http=$http,this.$location=$location,this.$q=$q,this.$timeout=$timeout,console.info("Rooms Actions Service constructed")}return _createClass(RoomsActions,[{key:"_fetch",value:function(){return this.$timeout(function(){return _rooms2["default"]},1200)}},{key:"fetch",value:function(){function fetchRoomsResponse(response){return _state2["default"].set("rooms",response.data),response.data}var _appState$get=_state2["default"].get(),rooms=_appState$get.rooms,accessToken=_appState$get.accessToken;if(rooms)return this.$q.when(rooms);var URL=_config2["default"].apiURL+"/booking/rooms/",params={params:{access_token:accessToken}};return this.$http.get(URL,params).then(fetchRoomsResponse)["catch"](function(error){return console.error("Can't fetch rooms",error)})}},{key:"select",value:function(room){_state2["default"].set("selectedRoom",room)}},{key:"rooms",get:function(){return _state2["default"].select("rooms").get()}}]),RoomsActions}();exports["default"]=RoomsActions},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=[{id:"1",title:"Переговорка 1",free:!0},{id:"2",title:"Комната 2",free:!1},{id:"3",title:"Переговорка 3",free:!1},{id:"4",title:"Test room 4",free:!0}]},function(module,exports,__webpack_require__){var content=__webpack_require__(31);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,".item_item_1Tgem{list-style-type:none;border-bottom:1px solid hsla(0,0%,100%,.1);background-color:#8e8e93;position:relative;top:40px}.item_item_1Tgem a{text-decoration:none;color:#fff;cursor:pointer;font-weight:100;font-size:1.2rem;padding:1.5rem 1rem;display:block}.item_free_1raV4{background:#ec4d6e;color:#fff}.item_animate_37A0F{top:0;transition:all .2s cubic-bezier(.52,0,1,1)}",""]),exports.locals={item:"item_item_1Tgem",free:"item_free_1raV4",animate:"item_animate_37A0F"}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_backButton=__webpack_require__(33),_backButton2=_interopRequireDefault(_backButton),template='\n    <a ng-animate="\'bbtn\'"\n       class="'+_backButton2["default"].backButton+' {{ $ctrl.aclass }}" \n       ng-href="{{ $ctrl.href }}" \n       ng-bind="$ctrl.title">\n    </a>\n',controller=function(){function controller($timeout){_classCallCheck(this,controller),this.$timeout=$timeout}return _createClass(controller,[{key:"$postLink",value:function(){var _this=this;this.$timeout(function(){_this.aclass=_backButton2["default"].animate},150)}}]),controller}();exports["default"]=angular.module("Back Button Module",[]).component("backButton",{bindings:{title:"@",href:"@"},template:template,controller:controller}).name},function(module,exports,__webpack_require__){var content=__webpack_require__(34);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,".back-button_backButton_2gGqe{color:#fff;font-weight:100;display:block;text-decoration:none;padding:20px 30px;position:relative;left:40px;border-bottom:1px solid hsla(0,0%,100%,.1)}@media only screen and (max-width:767px){.back-button_backButton_2gGqe{padding:15px;font-size:16px}}.back-button_animate_IadIN{left:0;transition:all .2s cubic-bezier(.32,0,1,1)}",""]),exports.locals={backButton:"back-button_backButton_2gGqe",animate:"back-button_animate_IadIN"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var bindings={items:"<",category:"@",key:"@",action:"&"},template='\n    <ul>\n        <item ng-repeat="item in $ctrl.items track by $index" \n              item="item" \n              category="{{ $ctrl.category }}" \n              key="{{ $ctrl.key || \'id\'}}"\n              action="$ctrl.action($event)">\n        </item>\n    </ul>\n';exports["default"]=angular.module("Items List Module",[__webpack_require__(36)["default"]]).component("itemsList",{bindings:bindings,template:template}).name},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_item=__webpack_require__(37),_item2=_interopRequireDefault(_item),bindings={item:"<",category:"@",key:"@",action:"&"},template='\n        <li class="'+_item2["default"].item+' {{ $ctrl.aclass }}">\n            <a  \n               ng-bind="$ctrl.item.title"\n               ng-click="$ctrl.onClick(item);"\n               ng-href="/{{ $ctrl.category }}/{{ $ctrl.item[$ctrl.key || \'id\'] }}">\n            </a>\n        </li>\n',controller=function(){function controller($timeout){_classCallCheck(this,controller),this.$timeout=$timeout}return _createClass(controller,[{key:"$postLink",value:function(){var _this=this;this.$timeout(function(){_this.aclass=_item2["default"].animate},150)}},{key:"onClick",value:function(item){console.log(":D click!",_typeof(this.action));var $event={item:item};this.action($event)}}]),controller}();exports["default"]=angular.module("Item Module",[]).component("item",{bindings:bindings,template:template,controller:controller}).name},function(module,exports,__webpack_require__){var content=__webpack_require__(38);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(12)(content,{});content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(11)(),exports.push([module.id,".item_item_28e6z{list-style-type:none;border-bottom:1px solid hsla(0,0%,100%,.1);background-color:#8e8e93;position:relative;top:40px}.item_item_28e6z a{text-decoration:none;color:#fff;cursor:pointer;font-weight:100;font-size:1.2rem;padding:1.5rem 1rem;display:block}.item_animate_1-mKc{top:0;transition:all .2s cubic-bezier(.52,0,1,1)}",""]),exports.locals={item:"item_item_28e6z",animate:"item_animate_1-mKc"}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_actions=__webpack_require__(40),_actions2=_interopRequireDefault(_actions),_item=__webpack_require__(30),_item2=_interopRequireDefault(_item),_config=__webpack_require__(8),_config2=_interopRequireDefault(_config),resolve=_config2["default"].routerResolve,template='\n    <div>\n        <back-button ng-href="/rooms" title="&larr; Переговорка №{{ $ctrl.room.title }}"></back-button>\n        <ul>\n            <li ng-repeat="date in $ctrl.dates track by $index" class="'+_item2["default"].item+' {{ $ctrl.aclass }}">\n              <a ng-href="/booking/{{ $ctrl.room.id }}/{{ date.id }}"\n                 ng-bind="date.title"\n                 ng-class="$ctrl.isFree(date)"\n                 ng-click="$ctrl.onClick(date);">\n              </a>\n            </li>\n        </ul>\n    </div>\n',controller=function(){function controller(datesActions,$routeParams,$timeout){var _this=this;_classCallCheck(this,controller),this.actions=datesActions,this.$timeout=$timeout,datesActions.fetch($routeParams.id).then(function(items){return _this.dates=items})}return _createClass(controller,[{key:"$postLink",value:function(){var _this2=this;this.$timeout(function(){_this2.aclass=_item2["default"].animate},150)}},{key:"isFree",value:function(date){return"free"in date&&date.free?_item2["default"].free:""}},{key:"onClick",value:function(date){this.actions.select(date)}},{key:"room",get:function(){return this.actions.room}}]),controller}();exports["default"]=angular.module("Dates Module",[__webpack_require__(32)["default"],__webpack_require__(35)["default"]]).service("datesActions",_actions2["default"]).component("datesPage",{bindings:{state:"<"},template:template,controller:controller}).config(function($routeProvider){return $routeProvider.when("/room/:id",{template:'<dates-page state="$resolve.state"></dates-page>',resolve:resolve})}).name},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_state=__webpack_require__(17),_state2=_interopRequireDefault(_state),_config=__webpack_require__(8),_config2=_interopRequireDefault(_config),_dates=__webpack_require__(41),_dates2=_interopRequireDefault(_dates),path=void 0,DatesActions=function(){function DatesActions($http,$location,$q,$timeout){_classCallCheck(this,DatesActions),this.$http=$http,this.$location=$location,this.$q=$q,this.$timeout=$timeout,console.info("Dates Actions Service constructed")}return _createClass(DatesActions,[{key:"_fetch",value:function(){return this.$timeout(function(){return _dates2["default"]},1200)}},{key:"fetch",value:function(room_id){function fetchDatesResponse(response){return response.data}var _appState$get=_state2["default"].get(),accessToken=_appState$get.accessToken,URL=_config2["default"].apiURL+"/booking/dates/",params={params:{access_token:accessToken,room_id:room_id}};return this.$http.get(URL,params).then(fetchDatesResponse)["catch"](function(error){return console.error("Can't fetch dates",error)})}},{key:"select",value:function(date){_state2["default"].set("selectedDate",date)}},{key:"room",get:function(){return _state2["default"].select("selectedRoom").get()}},{key:"dates",get:function(){return path?_state2["default"].select(path).get():null}}]),DatesActions}();exports["default"]=DatesActions},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=[{id:"20160714",title:"14 июля"},{id:"20160715",title:"15 июля"},{id:"20160716",title:"16 июля"},{id:"20160717",title:"17 июля"},{id:"20160718",title:"18 июля"}]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{
"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_actions=__webpack_require__(43),_actions2=_interopRequireDefault(_actions),_item=__webpack_require__(30),_item2=_interopRequireDefault(_item),_config=__webpack_require__(8),_config2=_interopRequireDefault(_config),resolve=_config2["default"].routerResolve,template='\n    <div>\n        <back-button ng-href="/room/{{ $ctrl.room.id }}" \n                     title="&larr; Переговорка №{{ $ctrl.room.title }}, {{ $ctrl.date.title }}">\n        </back-button>\n        <ul>\n            <li ng-repeat="book in $ctrl.booking track by $index" \n                class="'+_item2["default"].item+' {{ $ctrl.aclass }}">\n                <a ng-class="$ctrl.isFree(book)" \n                   ng-click="$ctrl.book(book, $index)">\n                     {{ book.title }}\n                     <span ng-if="book.owner">{{ book.owner }}</span>\n                </a>\n            </li>\n        </ul>\n    </div>\n',controller=function(){function controller(bookingActions,$routeParams,$timeout){var _this=this;_classCallCheck(this,controller),this.actions=bookingActions,this.$timeout=$timeout,this.pageParams={room:$routeParams.room,date:$routeParams.date},bookingActions.fetch($routeParams.room,$routeParams.date).then(function(items){return _this.booking=items})}return _createClass(controller,[{key:"$postLink",value:function(){var _this2=this;this.$timeout(function(){_this2.aclass=_item2["default"].animate},150)}},{key:"isFree",value:function(book){return"free"in book&&book.free?_item2["default"].free:""}},{key:"book",value:function(_book,index){var _this3=this;this.actions.book(_book).then(function(resp){_this3.actions.fetch(_this3.pageParams.room,_this3.pageParams.date).then(function(items){return _this3.booking=items})})}},{key:"room",get:function(){return this.actions.room}},{key:"date",get:function(){return this.actions.date}}]),controller}();exports["default"]=angular.module("Time Module",[__webpack_require__(32)["default"],__webpack_require__(35)["default"]]).service("bookingActions",_actions2["default"]).component("timePage",{bindings:{state:"<"},template:template,controller:controller}).config(function($routeProvider){return $routeProvider.when("/booking/:room/:date",{template:'<time-page state="$resolve.state"></time-page>',resolve:resolve})}).name},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_state=__webpack_require__(17),_state2=_interopRequireDefault(_state),_config=__webpack_require__(8),_config2=_interopRequireDefault(_config),_formData=__webpack_require__(44),_formData2=_interopRequireDefault(_formData),BookingActions=function(){function BookingActions($http,$location,$q,$timeout){_classCallCheck(this,BookingActions),this.$http=$http,this.$location=$location,this.$q=$q,this.$timeout=$timeout,console.info("Dates Actions Service constructed")}return _createClass(BookingActions,[{key:"fetch",value:function(room_id,date_id){function fetchTimeResponse(response){return response.data}var _appState$get=_state2["default"].get(),accessToken=_appState$get.accessToken,URL=_config2["default"].apiURL+"/booking/time/",params={params:{access_token:accessToken,room_id:room_id,date_id:date_id}};return console.log(":D params",params),this.$http.get(URL,params).then(fetchTimeResponse)["catch"](function(error){return console.error("Can't fetch time",error)})}},{key:"book",value:function(time){function bookTimeResponse(response){console.log(":D response",response)}var time_id=time.id,room_id=this.room.id,date_id=this.date.id,_appState$get2=_state2["default"].get(),accessToken=_appState$get2.accessToken,url=_config2["default"].apiURL+"/booking/book/?access_token="+accessToken,data=_formData2["default"].fromJSON(Object.assign({},{room_id:room_id,date_id:date_id,time_id:time_id}));console.log(":D data",data);var headers=_formData2["default"].сontentType;return this.$http({method:"POST",url:url,data:data,headers:headers}).then(bookTimeResponse)["catch"](function(error){return console.error("Can't book time",error)})}},{key:"room",get:function(){return _state2["default"].select("selectedRoom").get()}},{key:"date",get:function(){return _state2["default"].select("selectedDate").get()}},{key:"user",get:function(){return _state2["default"].select("user").get()}}]),BookingActions}();exports["default"]=BookingActions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _qs=__webpack_require__(45),fromArray=function(name,arr){var params=[];return arr.forEach(function(value){return params.push(name+"="+value)}),params.join("&")},fromJSON=function(data){return decodeURIComponent((0,_qs.stringify)(data))},сontentType={"Content-Type":"application/x-www-form-urlencoded"};exports["default"]={fromArray:fromArray,fromJSON:fromJSON,"сontentType":сontentType}},,,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_jsCookie=__webpack_require__(50),_jsCookie2=_interopRequireDefault(_jsCookie),_state=__webpack_require__(17),_state2=_interopRequireDefault(_state),_config=__webpack_require__(8),_config2=_interopRequireDefault(_config),_formData=__webpack_require__(44),_formData2=_interopRequireDefault(_formData),fakeURL="https://mixplat-api.sms-online.com",CommonActions=function(){function CommonActions($http,$location,$q){_classCallCheck(this,CommonActions),this.$http=$http,this.$location=$location,this.$q=$q,console.info("Common Actions Service constructed")}return _createClass(CommonActions,[{key:"authorization",value:function(){var _this=this,_appState$select$get=_state2["default"].select("loginForm").get(),login=_appState$select$get.login,password=_appState$select$get.password,temporary=_appState$select$get.temporary,expires=1;temporary?(temporary=void 0,expires=365):temporary=!0;var query=_formData2["default"].fromJSON({login:login,password:password,temporary:temporary});_config2["default"].apiURL+"/booking/login/";return this.$http({method:"POST",url:_config2["default"].apiURL+"/booking/login/",data:query,headers:_formData2["default"].сontentType}).then(function(response){var _response$data=response.data,access_token=_response$data.access_token,status=_response$data.status;return"error"===status?{error:"Ошибка"}:(_jsCookie2["default"].set("sid",access_token,{expires:expires}),_state2["default"].set("accessToken",access_token),_state2["default"].select("loginForm").unset(),_this.$location.path("/rooms"),{error:null})})["catch"](function(error){return{error:error.data.message}})}},{key:"authentication",value:function(){var accessToken=_state2["default"].select("accessToken").get();if(!accessToken){if(accessToken=_jsCookie2["default"].get("sid"))return"/"===this.$location.path()&&this.$location.path("/rooms"),void _state2["default"].set("accessToken",accessToken);if(console.warn("Access Token not found"),"/"!==this.$location.path())return this.$location.path("/")}return this.$q.when({})}},{key:"logout",value:function(){var _this2=this,_appState$get=_state2["default"].get(),accessToken=_appState$get.accessToken;this.$http["delete"](fakeURL+"/v1/logout?access_token="+accessToken).then(function(){_jsCookie2["default"].remove("sid"),_this2.$location.path("/"),_state2["default"].unset()})}},{key:"fetchUser",value:function(accessToken){function fetchUserResponse(response){return _state2["default"].set("user",response.data),response.data}if(accessToken){var _appState$get2=_state2["default"].get(),user=_appState$get2.user;if(user)return this.$q.when(user);var URL=fakeURL+"/booking/login/",params={params:{access_token:accessToken}};return this.$http.get(URL,params).then(fetchUserResponse)["catch"](function(error){return console.error("Can't fetch user",error)})}}}]),CommonActions}();exports["default"]=CommonActions}]);